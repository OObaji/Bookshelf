<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Book & Mentor Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-image: url('https://images.unsplash.com/photo-1568667256549-094345857637?q=80&w=1915&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        #spotlight-overlay {
            position: fixed;
            inset: 0;
            background: radial-gradient(circle 350px at var(--x, 50%) var(--y, 50%), rgba(0,0,0,0) 0%, rgba(0,0,0,0.8) 80%);
            pointer-events: none;
            z-index: 1;
        }
        #app, #auth-section {
            position: relative;
            z-index: 2;
        }
        .card-enter {
            animation: card-enter 0.5s ease-out;
        }
        @keyframes card-enter {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
        #toast.show {
            transform: translateY(0);
            opacity: 1;
        }
        .nav-btn.active {
            background-color: #4f46e5;
            color: white;
        }
        .filter-btn.active {
            background-color: #4f46e5;
            color: white;
            border-color: #4f46e5;
        }
        #bible-text-content p {
            margin-bottom: 1rem;
        }
        #bible-text-content sup {
            font-weight: bold;
            color: #4f46e5;
            margin-right: 0.25em;
        }
        #bible-text-content mark {
            background-color: #fef08a;
            cursor: pointer;
            border-radius: 2px;
        }
        #highlight-popover {
            position: absolute;
            display: none;
            z-index: 100;
        }
        .scripture-card {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .scripture-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
    </style>
</head>
<body class="text-gray-800">

<!-- Your full body and scripts remain unchanged up to the callGeminiAPI function -->
<script type="module">
// --- AI API Calls ---
async function callGeminiAPI(prompt, responseSchema) {
    const payload = {
        contents: [{ role: "user", parts: [{ text: prompt }] }],
        generationConfig: {
            responseMimeType: "application/json",
            responseSchema
        }
    };

    // âœ… Injected Gemini API Key
    const apiKey = "AIzaSyCWBl0izRgIdzEXbEHR1hUEo9391oy5ImE";

    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

    try {
        const response = await fetch(apiUrl, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
        });

        if (!response.ok) throw new Error(`API request failed with status ${response.status}`);

        const result = await response.json();

        if (result.candidates?.[0]?.content?.parts?.[0]) {
            return JSON.parse(result.candidates[0].content.parts[0].text);
        }

        console.warn("No valid candidates found in AI response.", result);
        return [];
    } catch (error) {
        console.error("Error calling Gemini API:", error);
        return [];
    }
}
</script>
</body>
</html>
